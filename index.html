<!DOCTYPE html>
<html>
<head>
  <title>車掌用コンテンツアプリ</title>
  <style>
    html{
        background-color: black;
    }

    .square-container {
      display: flex;
      margin-top: 10px;
    }

    .square {
      width: 25px;
      height: 25px;
      background-color: gray;
      color: black;
      margin: 5px;
    }
    .square.green {
      background-color: green;
      color: white;
    }
    .square.red {
      background-color: red;
      color: white;
    }

    /* ロード画面のスタイル */
    #loader {
      display: flex;
      justify-content: center;
      align-items: center;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #f1f1f1;
      z-index: 9999;
    }
    
    /* ローディングアイコンのスタイル */
    .loader-icon {
      display: inline-block;
      width: 50px;
      height: 50px;
      border: 5px solid #333;
      border-radius: 50%;
      border-top-color: transparent;
      animation: spin 1s ease-in-out infinite;
    }
    
    /* ローディングアイコンのアニメーション */
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* パスワード入力フォームと非表示コンテンツのスタイル */
    #password-form,
    #hidden-content {
      display: none;
    }
    
    #password-form {
      text-align: center;
      margin-top: 100px;
    }
    
    #password-input,
    #submit-button {
      margin-top: 10px;
    }

    .right{
        display: flex;
    }

    #container{
        text-align: center;
    }

    .left{
        display: flex;
    }

    #container2{
        text-align: center;
    }
  </style>
</head>
<body>
  <!-- ロード画面 -->
  <div id="loader">
    <div class="loader-icon"></div>
    <img src="../IR全日本鉄道透過版(ロゴ).png">
  </div>

  <!-- パスワード入力フォーム -->
  <div id="password-form">
    <h2 style="color: white;">列車番号を入力してください</h2>
    <input type="password" id="password-input" placeholder="車両番号を入力してください">
    <br>
    <button id="submit-button">送信</button>
  </div>

  <!-- 非表示のコンテンツ -->
  <div id="hidden-content">
    <button id="button1" style="width: 40px; height: 40px; background-color: gray; ">両数</button>
    <button id="button2" onclick="playAudio('audio1')" style="width: 40px; height: 40px; background-color: greenyellow;">右開</button>
    <button id="button3" onclick="playAudio('audio2')" style="width: 40px; height: 40px; background-color: red;">右閉</button>
    <button id="button4" onclick="playAudio('audio3')" style="width: 40px; height: 40px; background-color: greenyellow;">左開</button>
    <button id="button5" onclick="playAudio('audio4')" style="width: 40px; height: 40px; background-color: red;">左閉</button>
    <button id="longPressButton">ボタンを長押しして音を再生</button>
  
  <script>
    var audio = new Audio('sound.mp3'); // 再生したい音声ファイルのパスを指定してください

    var longPressButton = document.getElementById('longPressButton');
    var timeoutId;

    longPressButton.addEventListener('mousedown', function() {
      timeoutId = setTimeout(function() {
        audio.play();
      }, 500); // 500ミリ秒の長押し時間を指定しています
    });

    longPressButton.addEventListener('mouseup', function() {
      clearTimeout(timeoutId);
      audio.pause();
      audio.currentTime = 0; // 音声を最初の位置に戻します
    });

    longPressButton.addEventListener('mouseleave', function() {
      clearTimeout(timeoutId);
      audio.pause();
      audio.currentTime = 0;
    });
  </script>
    <div class="right">
      <p style="color: white;">右</p>
      <div id="container"></div>
    </div>
    <div class="left">
      <p style="color: white;">左</p>
      <div id="container2"></div>
    </div>
  </div>
  <audio id="audio1" src="ドアチャイム.mp3"></audio>
  <audio id="audio2" src="ドアチャイム.mp3"></audio>
  <audio id="audio3" src="ドアチャイム.mp3"></audio>
  <audio id="audio4" src="ドアチャイム.mp3"></audio>
  <script>
    var button1 = document.getElementById('button1');
    var audio = new Audio('button audio.mp3');

    button1.addEventListener('click', function() {
      audio.currentTime = 0; // 再生位置をリセット
      audio.play();
    });
  </script>
  <script>
    var button1 = document.getElementById('button2');
    var audio = new Audio('button audio.mp3');

    button1.addEventListener('click', function() {
      audio.currentTime = 0; // 再生位置をリセット
      audio.play();
    });
  </script>
  <script>
    var button1 = document.getElementById('button3');
    var audio = new Audio('button audio.mp3');

    button1.addEventListener('click', function() {
      audio.currentTime = 0; // 再生位置をリセット
      audio.play();
    });
  </script>
  <script>
    var button1 = document.getElementById('button4');
    var audio = new Audio('button audio.mp3');

    button1.addEventListener('click', function() {
      audio.currentTime = 0; // 再生位置をリセット
      audio.play();
    });
  </script>
  <script>
    var button1 = document.getElementById('button5');
    var audio = new Audio('button audio.mp3');

    button1.addEventListener('click', function() {
      audio.currentTime = 0; // 再生位置をリセット
      audio.play();
    });
  </script>
  <script>
    var audio1 = document.getElementById('audio1');
    var audio2 = document.getElementById('audio2');
    var audio3 = document.getElementById('audio3');
    var audio4 = document.getElementById('audio4');

    function playAudio(id) {
      var currentAudio = getCurrentAudio();

      if (currentAudio === null) {
        // 再生中の音声がない場合、指定された音声を再生
        startAudio(id);
      } else if (id === currentAudio.id) {
        // 再生中の音声と同じボタンが押された場合、再生を停止
        stopAudio(currentAudio);
      } else {

      }if (id === 'audio1' || id === 'audio4') {
          // button3とbutton4の場合、重ねて再生
          startAudio(id);
      }else if (id === 'audio2' || id === 'audio3') {
          // button3とbutton4の場合、重ねて再生
          startAudio(id);
      }else if (id === 'audio2' || id === 'audio4') {
          // button3とbutton4の場合、重ねて再生
          startAudio(id);
      }else if (id === 'audio3' || id === 'audio1') {
          // button3とbutton4の場合、重ねて再生
          startAudio(id);
      }else if (id === 'audio3' || id === 'audio2') {
          // button3とbutton4の場合、重ねて再生
          startAudio(id);
      }else if (id === 'audio4' || id === 'audio1') {
          // button3とbutton4の場合、重ねて再生
          startAudio(id);
      }else if (id === 'audio4' || id === 'audio2') {
          // button3とbutton4の場合、重ねて再生
          startAudio(id);
      }else if (id === 'audio1' || id === 'audio3') {
          // button3とbutton4の場合、重ねて再生
          startAudio(id);
      }else if (id === 'audio1' || id === 'audio2') {
          // button1とbutton2の場合、再生中の音声を停止して指定された音声を再生
          stopAudio(currentAudio);
          startAudio(id);
      }else if (id === 'audio2' || id === 'audio1') {
          // button1とbutton2の場合、再生中の音声を停止して指定された音声を再生
          stopAudio(currentAudio);
          startAudio(id);
      }else if (id === 'audio3' || id === 'audio4') {
          // button1とbutton2の場合、再生中の音声を停止して指定された音声を再生
          stopAudio(currentAudio);
          startAudio(id);
      }else if (id === 'audio4' || id === 'audio3') {
          // button1とbutton2の場合、再生中の音声を停止して指定された音声を再生
          stopAudio(currentAudio);
          startAudio(id);
      }
    } 
 

    function getCurrentAudio() {
      // 再生中の音声を返す
      if (!audio1.paused) return { id: 'audio2', audio: audio1 };
      if (!audio2.paused) return { id: 'audio1', audio: audio2 };
      if (!audio3.paused) return { id: 'audio4', audio: audio3 };
      if (!audio4.paused) return { id: 'audio3', audio: audio4 };
      return null;
    }

    function startAudio(id) {
      var audio = document.getElementById(id);
      audio.currentTime = 0; // 再生位置をリセット
      audio.play();
    }

    function stopAudio(currentAudio) {
      currentAudio.audio.pause();
    }
  </script>
  <script>
    var container = document.getElementById('container');
    var container2 = document.getElementById('container2');
    var button1 = document.getElementById('button1');
    var button2 = document.getElementById('button2');
    var button3 = document.getElementById('button3');
    var button4 = document.getElementById('button4');
    var button5 = document.getElementById('button5');
    var squares = [];
    var squares2 = [];
    var delay = 12;
    var delay2 = 3300;

    button1.addEventListener('click', createSquares);
    button2.addEventListener('click', resetColor);
    button3.addEventListener('click', changeColor);
    button4.addEventListener('click', resetColor2);
    button5.addEventListener('click', changeColor2);

    function createSquares() {
      var numSquares = parseInt(prompt('両数を入力してください'));
      function createSquares() {
  // ...

  // ボタン2を有効化
  button2.disabled = false;

  // すべての□を緑色に変更する
  changeColor();
}

      clearContainer2();

      var squareContainer = document.createElement('div');
      squareContainer.className = 'square-container';

      var squareContainer2 = document.createElement('div');
      squareContainer2.className = 'square-container';

      for (var i = 0; i < numSquares; i++) {
        var square = document.createElement('div');
        square.className = 'square';
        squares.push(square);
        squareContainer.appendChild(square);
        var carnumber = i;
        square.textContent = carnumber + 1;
      }

      for (var j = 0; j < numSquares; j++) {
        var square2 = document.createElement('div');
        square2.className = 'square';
        squares2.push(square2);
        squareContainer2.appendChild(square2);
        var carnumber2 = j;
        square2.textContent = carnumber2 + 1;
      }

      container.appendChild(squareContainer);
      container2.appendChild(squareContainer2);

      // ボタン2を有効化
      button2.disabled = false;
    }

    function changeColor() {
    var isAllGreen = squares.every(function(square) {
      return square.classList.contains('green');
    });

    squares.forEach(function(square, index) {
      setTimeout(function() {
        square.classList.remove('red');
        square.classList.add('green');

        if (Math.random() < 0.02) {
          square.classList.remove('green');
          square.classList.add('red');
        }
      }, delay2 + delay * index);
    });

    // ボタン2を無効化
    button3.disabled = true;

    // ボタン3を有効化
    button2.disabled = false;
  }


    function resetColor() {
      squares.forEach(function(square) {
        square.classList.remove('green');
        square.classList.remove('red');
        square.classList.add('gray');
      });

      // ボタン3を無効化
      button2.disabled = true;

      // ボタン2を有効化
      button3.disabled = false;
    }

    function changeColor2() {
  squares2.forEach(function(square,index){
    setTimeout(function() {
    square.classList.remove('red');
    square.classList.add('green');
    if (Math.random() < 0.02) {
        square.classList.remove('green');
        square.classList.add('red');
      }
    },delay2 + delay * index)
  });
  // ボタン2を無効化
  button5.disabled = true;

// ボタン3を有効化
button4.disabled = false;
}

    function resetColor2() {
      squares2.forEach(function(square) {
        square.classList.remove('green');
        square.classList.remove('red');
        square.classList.add('gray');
      });
      // ボタン3を無効化
      button4.disabled = true;

      // ボタン2を有効化
      button5.disabled = false;
    }


    function clearContainer() {
      while (container.firstChild) {
        container.removeChild(container.firstChild);
      }
    }

    function clearContainer2() {
      while (container2.firstChild) {
        container2.removeChild(container2.firstChild);
      }
    }
  </script>

  <script>
    // ページのロードが完了したら非表示のコンテンツを表示する
    window.addEventListener('load', function() {
      setTimeout(function() {
        document.getElementById('loader').style.display = 'none';
        document.getElementById('password-form').style.display = 'block';
      }, 10000); // 10秒後にパスワード入力フォームを表示する
    });

    // パスワードの送信ボタンがクリックされた時の処理
    document.getElementById('submit-button').addEventListener('click', function() {
      var passwordInput = document.getElementById('password-input').value;
      var hiddenContent = document.getElementById('hidden-content');

      if (passwordInput === '482D') {
        // パスワードが一致したら非表示のコンテンツを表示する
        document.getElementById('password-form').style.display = 'none';
        hiddenContent.style.display = 'block';
      } else {
        alert('列車番号に誤りがあります');
      }
    });
  </script>
  
</body>
</html>